@model GymManagementSystem.Models.Entities.Appointment
@{
    ViewData["Title"] = "Randevu Detaylarƒ±";
}

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0">üìã Randevu Detaylarƒ±</h3>
            </div>
            <div class="card-body p-4">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <h5 class="text-muted">Hizmet Bilgileri</h5>
                        <p><strong>Hizmet:</strong> @Model.Service.Name</p>
                        <p><strong>A√ßƒ±klama:</strong> @Model.Service.Description</p>
                        <p><strong>S√ºre:</strong> @Model.Service.DurationMinutes dakika</p>
                        <p><strong>√úcret:</strong> @Model.Service.Price ‚Ç∫</p>
                    </div>
                    <div class="col-md-6">
                        <h5 class="text-muted">Antren√∂r Bilgileri</h5>
                        <p><strong>Ad Soyad:</strong> @Model.Trainer.FullName</p>
                        <p><strong>Email:</strong> @Model.Trainer.Email</p>
                        <p><strong>Telefon:</strong> @Model.Trainer.PhoneNumber</p>
                        @if (!string.IsNullOrEmpty(Model.Trainer.Bio))
                        {
                            <p><strong>Bio:</strong> @Model.Trainer.Bio</p>
                        }
                    </div>
                </div>

                <hr />

                <div class="row mb-3">
                    <div class="col-md-6">
                        <h5 class="text-muted">Randevu Bilgileri</h5>
                        <p><strong>Tarih:</strong> @Model.AppointmentDate.ToString("dd MMMM yyyy, dddd")</p>
                        <p><strong>Ba≈ülangƒ±√ß:</strong> @Model.StartTime.ToString(@"hh\:mm")</p>
                        <p><strong>Biti≈ü:</strong> @Model.EndTime.ToString(@"hh\:mm")</p>
                    </div>
                    <div class="col-md-6">
                        <h5 class="text-muted">Durum</h5>
                        <p>
                            @{
                                var statusClass = Model.Status switch
                                {
                                    "Pending" => "warning",
                                    "Approved" => "success",
                                    "Cancelled" => "secondary",
                                    "Completed" => "info",
                                    _ => "primary"
                                };

                                var statusText = Model.Status switch
                                {
                                    "Pending" => "Beklemede",
                                    "Approved" => "Onaylandƒ±",
                                    "Cancelled" => "ƒ∞ptal Edildi",
                                    "Completed" => "Tamamlandƒ±",
                                    _ => Model.Status
                                };
                            }
                            <span class="badge bg-@statusClass fs-6">@statusText</span>
                        </p>
                        <p><strong>Olu≈üturulma:</strong> @Model.CreatedAt.ToString("dd.MM.yyyy HH:mm")</p>
                    </div>
                </div>

                @if (!string.IsNullOrEmpty(Model.Notes))
                {
                    <hr />
                    <h5 class="text-muted">Notlar</h5>
                    <p class="alert alert-info">@Model.Notes</p>
                }

                <hr />

                <div class="d-flex justify-content-between">
                    <a asp-action="MyAppointments" class="btn btn-secondary">
                        ‚Üê Geri D√∂n
                    </a>
                    @if (Model.Status == "Pending" || Model.Status == "Approved")
                    {
                        <form asp-action="Cancel" asp-route-id="@Model.Id" method="post" 
                              onsubmit="return confirm('Randevuyu iptal etmek istediƒüinizden emin misiniz?');">
                            @Html.AntiForgeryToken()
                            <button type="submit" class="btn btn-danger">
                                ƒ∞ptal Et
                            </button>
                        </form>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
