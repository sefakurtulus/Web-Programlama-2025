@model GymManagementSystem.Models.Entities.Trainer

@{
    ViewData["Title"] = "Yeni AntrenÃ¶r Ekle";
}

<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card shadow">
            <div class="card-header bg-info text-white">
                <h3 class="mb-0">âž• Yeni AntrenÃ¶r Ekle</h3>
            </div>
            <div class="card-body">
                <form asp-action="CreateTrainer" method="post" id="trainerForm">
                    
                    <!-- Temel Bilgiler -->
                    <h5 class="border-bottom pb-2 mb-3">ðŸ‘¤ Temel Bilgiler</h5>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="FullName" class="form-label">Ad Soyad *</label>
                            <input asp-for="FullName" class="form-control" placeholder="Ã–rn: Ahmet YÄ±lmaz" required />
                            <span asp-validation-for="FullName" class="text-danger"></span>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label asp-for="Email" class="form-label">Email *</label>
                            <input asp-for="Email" type="email" class="form-control" placeholder="ornek@gym.com" required />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="PhoneNumber" class="form-label">Telefon</label>
                            <input asp-for="PhoneNumber" type="tel" class="form-control" placeholder="555-0000" />
                            <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label asp-for="HourlyRate" class="form-label">Saatlik Ãœcret (â‚º) *</label>
                            <input asp-for="HourlyRate" type="number" step="0.01" class="form-control" placeholder="300.00" required />
                            <span asp-validation-for="HourlyRate" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label asp-for="Bio" class="form-label">Biyografi</label>
                        <textarea asp-for="Bio" class="form-control" rows="2" placeholder="KÄ±sa tanÄ±tÄ±m..."></textarea>
                    </div>

                    <!-- UzmanlÄ±k AlanlarÄ± -->
                    <h5 class="border-bottom pb-2 mb-3 mt-4">ðŸŽ¯ UzmanlÄ±k AlanlarÄ±</h5>
                    
                    <div class="mb-3">
                        <label class="form-label">UzmanlÄ±k AlanlarÄ± SeÃ§ (En az 1 tane)</label>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" name="Specialties" value="Kilo Verme" id="sp1">
                                    <label class="form-check-label" for="sp1">Kilo Verme</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" name="Specialties" value="Kas Yapma" id="sp2">
                                    <label class="form-check-label" for="sp2">Kas Yapma</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" name="Specialties" value="Yoga" id="sp3">
                                    <label class="form-check-label" for="sp3">Yoga</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" name="Specialties" value="Pilates" id="sp4">
                                    <label class="form-check-label" for="sp4">Pilates</label>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" name="Specialties" value="Cardio" id="sp5">
                                    <label class="form-check-label" for="sp5">Cardio</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" name="Specialties" value="Crossfit" id="sp6">
                                    <label class="form-check-label" for="sp6">Crossfit</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" name="Specialties" value="VÃ¼cut GeliÅŸtirme" id="sp7">
                                    <label class="form-check-label" for="sp7">VÃ¼cut GeliÅŸtirme</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" name="Specialties" value="Zumba" id="sp8">
                                    <label class="form-check-label" for="sp8">Zumba</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- MÃ¼saitlik Saatleri -->
                    <h5 class="border-bottom pb-2 mb-3 mt-4">ðŸ“… MÃ¼saitlik Saatleri</h5>
                    
                    <div class="table-responsive">
                        <table class="table table-bordered table-sm">
                            <thead class="table-light">
                                <tr>
                                    <th width="15%">GÃ¼n</th>
                                    <th width="15%">Aktif</th>
                                    <th width="35%">BaÅŸlangÄ±Ã§ Saati</th>
                                    <th width="35%">BitiÅŸ Saati</th>
                                </tr>
                            </thead>
                            <tbody>
                                @{
                                    var days = new[] { 
                                        new { Value = "Monday", Text = "Pazartesi" },
                                        new { Value = "Tuesday", Text = "SalÄ±" },
                                        new { Value = "Wednesday", Text = "Ã‡arÅŸamba" },
                                        new { Value = "Thursday", Text = "PerÅŸembe" },
                                        new { Value = "Friday", Text = "Cuma" },
                                        new { Value = "Saturday", Text = "Cumartesi" },
                                        new { Value = "Sunday", Text = "Pazar" }
                                    };
                                    int index = 0;
                                }
                                @foreach (var day in days)
                                {
                                    <tr>
                                        <td><strong>@day.Text</strong></td>
                                        <td>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input day-checkbox" 
                                                       id="day@(index)" 
                                                       name="AvailableDays" 
                                                       value="@day.Value"
                                                       onchange="toggleTimeInputs('@index')">
                                                <label class="form-check-label" for="day@(index)">MÃ¼sait</label>
                                            </div>
                                        </td>
                                        <td>
                                            <input type="time" class="form-control form-control-sm" 
                                                   id="start@(index)" 
                                                   name="StartTimes_@day.Value" 
                                                   value="09:00" 
                                                   disabled />
                                        </td>
                                        <td>
                                            <input type="time" class="form-control form-control-sm" 
                                                   id="end@(index)" 
                                                   name="EndTimes_@day.Value" 
                                                   value="17:00" 
                                                   disabled />
                                        </td>
                                    </tr>
                                    index++;
                                }
                            </tbody>
                        </table>
                    </div>

                    <div class="alert alert-info mt-3">
                        <strong>ðŸ’¡ Ä°pucu:</strong> MÃ¼sait gÃ¼n seÃ§mezseniz, antrenÃ¶r herhangi bir gÃ¼n randevu alamaz.
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                        <a asp-action="ManageTrainers" class="btn btn-secondary">
                            Ä°ptal
                        </a>
                        <button type="submit" class="btn btn-info text-white">
                            <i class="bi bi-plus-circle"></i> AntrenÃ¶r OluÅŸtur
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>
        function toggleTimeInputs(index) {
            const checkbox = document.getElementById('day' + index);
            const startInput = document.getElementById('start' + index);
            const endInput = document.getElementById('end' + index);
            
            if (checkbox.checked) {
                startInput.disabled = false;
                endInput.disabled = false;
                startInput.classList.add('border-info');
                endInput.classList.add('border-info');
            } else {
                startInput.disabled = true;
                endInput.disabled = true;
                startInput.classList.remove('border-info');
                endInput.classList.remove('border-info');
            }
        }

        // Validation: En az 1 uzmanlÄ±k seÃ§ilmeli
        document.getElementById('trainerForm').addEventListener('submit', function(e) {
            const specialties = document.querySelectorAll('input[name="Specialties"]:checked');
            if (specialties.length === 0) {
                e.preventDefault();
                alert('LÃ¼tfen en az 1 uzmanlÄ±k alanÄ± seÃ§in!');
                return false;
            }

            const days = document.querySelectorAll('input[name="AvailableDays"]:checked');
            if (days.length === 0) {
                const confirm = window.confirm('HiÃ§ mÃ¼saitlik gÃ¼nÃ¼ seÃ§mediniz. Bu antrenÃ¶r randevu alamayacak. Devam etmek istiyor musunuz?');
                if (!confirm) {
                    e.preventDefault();
                    return false;
                }
            }
        });
    </script>
    <style>
        .table-sm td, .table-sm th {
            vertical-align: middle;
        }
        .border-info {
            border-color: #0dcaf0 !important;
        }
    </style>
}
